<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>核心命令 | Zignis</title>
    <meta name="description" content="沉淀最佳实践，减少重复投入，统一实现方式。">
    
    
    <link rel="preload" href="/assets/css/0.styles.b4b7b21d.css" as="style"><link rel="preload" href="/assets/js/app.1eb45f36.js" as="script"><link rel="preload" href="/assets/js/2.0ac135ce.js" as="script"><link rel="preload" href="/assets/js/7.a2004bf4.js" as="script"><link rel="prefetch" href="/assets/js/3.a01b05e6.js"><link rel="prefetch" href="/assets/js/4.c4832647.js"><link rel="prefetch" href="/assets/js/5.86a2910a.js"><link rel="prefetch" href="/assets/js/6.70829390.js"><link rel="prefetch" href="/assets/js/8.d27454aa.js"><link rel="prefetch" href="/assets/js/9.f68989a5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b4b7b21d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Zignis</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">指南</a></div><div class="nav-item"><a href="http://zignis.js.org/typedoc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  参考
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/zhike-team/zignis" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">指南</a></div><div class="nav-item"><a href="http://zignis.js.org/typedoc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  参考
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/zhike-team/zignis" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" class="sidebar-link">介绍</a></li><li><a href="/guide/quickstart/" class="sidebar-link">快速上手</a></li><li><a href="/guide/core-commands/" class="active sidebar-link">核心命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/core-commands/#zignis-application" class="sidebar-link">zignis application</a></li><li class="sidebar-sub-header"><a href="/guide/core-commands/#zignis-hook" class="sidebar-link">zignis hook</a></li><li class="sidebar-sub-header"><a href="/guide/core-commands/#zignis-init" class="sidebar-link">zignis init</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="核心命令"><a href="#核心命令" class="header-anchor">#</a> 核心命令</h1> <h2 id="zignis-application"><a href="#zignis-application" class="header-anchor">#</a> <code>zignis application</code></h2> <blockquote><p>alias: <code>app</code></p></blockquote> <p>默认这个命令没有任何功能，存在的意思是跟业务项目建立一个约定，建议业务项目添加的命令都写成这个命令的子命令。而业务项目之所以能为这个命令添加子命令是利用了 <code>Zignis</code> 的命令扩展机制。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>zignis <span class="token function">make</span> <span class="token builtin class-name">command</span> application/test --extend<span class="token operator">=</span>zignis
</code></pre></div><p>这样就可以为项目添加一个 test 命令，而这个命令在执行的时候需要使用 <code>zignis application test</code> 的方式来调用。</p> <p>通过 <code>zignis application help</code> 可以看到当前业务项目定义的所有顶级子命令，因为如果项目实现的命令过多，层次也多的话，一般我们很难记住所有命令和参数，所以帮助命令是我们经常要执行的。</p> <h2 id="zignis-hook"><a href="#zignis-hook" class="header-anchor">#</a> <code>zignis hook</code></h2> <p>这个命令的输出显示了当前环境下可用的所有的钩子，所有实现这些钩子的逻辑都可以被执行。在输出当中能够看到钩子的名称，描述，以及钩子在哪个模块声明的：</p> <div class="language- extra-class"><pre class="language-text"><code>╔══════════════════════╤═════════════════════╤════════════════════════════════════════════════════╗
║ Hook                 │ Package             │ Description                                        ║
╟──────────────────────┼─────────────────────┼────────────────────────────────────────────────────╢
║ hook_beforeCommand   │ zignis              │ Hook triggered before command execution.           ║
╟──────────────────────┼─────────────────────┼────────────────────────────────────────────────────╢
║ hook_afterCommand    │ zignis              │ Hook triggered after command execution.            ║
╟──────────────────────┼─────────────────────┼────────────────────────────────────────────────────╢
║ hook_components      │ zignis              │ Hook triggered when needing to fetch components    ║
╟──────────────────────┼─────────────────────┼────────────────────────────────────────────────────╢
║ hook_hook            │ zignis              │ Hook triggered in hook command.                    ║
╟──────────────────────┼─────────────────────┼────────────────────────────────────────────────────╢
║ hook_repl            │ zignis              │ Hook triggered in repl command.                    ║
╟──────────────────────┼─────────────────────┼────────────────────────────────────────────────────╢
║ hook_status          │ zignis              │ Hook triggered in status command.                  ║
╟──────────────────────┼─────────────────────┼────────────────────────────────────────────────────╢
║ hook_new_repo        │ zignis              │ Hook triggered in new command.                     ║
╟──────────────────────┼─────────────────────┼────────────────────────────────────────────────────╢
║ hook_zhike_cron      │ zignis-plugin-zhike │ Hook triggered in zignis zhike cron command        ║
╟──────────────────────┼─────────────────────┼────────────────────────────────────────────────────╢
║ hook_zhike_component │ zignis-plugin-zhike │ Hook triggered when zhike hook_components invoked  ║
╟──────────────────────┼─────────────────────┼────────────────────────────────────────────────────╢
║ hook_zhike_repl      │ zignis-plugin-zhike │ Hook triggered when zhike hook_repl invoked        ║
╚══════════════════════╧═════════════════════╧════════════════════════════════════════════════════╝
</code></pre></div><p>这里可以看到有一个特殊的钩子是 <code>hook_hook</code> 实现这个钩子就可以声明钩子，任何插件都可以声明自己的钩子，让其他命令来调用，从而影响自身的行为，一般业务项目是不需要声明自己的钩子的，除非业务项目深度使用了这个机制，来构成自己业务的插件系统。</p> <p>另外需要注意的是，即使不声明，钩子也是可以被使用的，只要其被实现了，这里声明钩子只是为了透明。具体如何声明和实现钩子将在钩子相关章节说明。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>这里未来有可能改成不声明的钩子不让使用的逻辑</p></div> <h2 id="zignis-init"><a href="#zignis-init" class="header-anchor">#</a> <code>zignis init</code></h2> <p>这个命令用来做初始化，可以实现两种场景，对业务项目的初始化或者对插件的初始化，这两个场景的差别在于目录结构稍有差异。</p> <p>业务项目中，我们默认将 <code>Zignis</code> 的目录结构放到 <code>bin</code> 目录:</p> <div class="language- extra-class"><pre class="language-text"><code>├── .zignisrc.json
├── bin
│   └── zignis
│       ├── commands
│       ├── extends
│       ├── hooks
│       ├── plugins
│       └── scripts
└── package.json

</code></pre></div><p>而在插件项目中，我们是把所有代码放到 <code>src</code> 目录:</p> <div class="language- extra-class"><pre class="language-text"><code>├── .zignisrc.json
├── src
│    ├── commands
│    ├── extends
│    ├── hooks
└── package.json
</code></pre></div><p>这个命令存在的意义也仅仅是为了节省工程师若干秒的时间，也就是说如果不用这个命令，手动去创建这些目录和文件夹也是 OK 的。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>关于 <code>.zignisrc.json</code> 的结构和用途将在配置管理章节说明</p></div> <p>另外，如果我们真的要创建一个插件，通过初始化的方式进行还是太慢了，这里推荐使用插件项目模板进行，具体的命令如下：</p> <div class="language- extra-class"><pre class="language-text"><code>zignis new zignis-plugin-xxx --select=plugin
</code></pre></div><p>很明显这里还可以使用其他项目模板，关于 <code>new</code> 命令，参见下放关于 <code>new</code> 命令的介绍。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zhike-team/zignis/edit/master/doc/guide/core-commands/README.md" target="_blank" rel="noopener noreferrer">Help improve this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/quickstart/" class="prev">快速上手</a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1eb45f36.js" defer></script><script src="/assets/js/2.0ac135ce.js" defer></script><script src="/assets/js/7.a2004bf4.js" defer></script>
  </body>
</html>
